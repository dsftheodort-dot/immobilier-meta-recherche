<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M√©ta-recherche Immo France (multi-sites)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { font-size: 1.4rem; }
    label { display:block; margin-top:10px; font-weight: bold; }
    input, select { width: 100%; padding:8px; margin-top:4px; }
    button { margin-top:15px; padding:10px 15px; background:#1a73e8; color:white; border:none; border-radius:6px; cursor:pointer; }
    .results { margin-top: 20px; }
    a { display:block; margin:6px 0; }
  </style>
</head>
<body>
  <h1>üîé M√©ta-recherche immo (France)</h1>

  <form id="criteriaForm">
    <label>Ville (ex : Paris ou Lyon)
      <input id="city" required />
    </label>

    <label>Budget max (‚Ç¨)
      <input id="budget" type="number" min="0" step="1000" required />
    </label>

    <label>Type de bien</label>
    <select id="type">
      <option value="">Indiff√©rent</option>
      <option value="maison">Maison</option>
      <option value="appartement">Appartement</option>
      <option value="terrain">Terrain</option>
    </select>

    <label>Mots-cl√©s (facultatif, ex: "non lou√©, travaux, investissement")
      <input id="keywords" placeholder="s√©parez par des virgules" />
    </label>

    <button type="submit">G√©n√©rer mes recherches</button>
  </form>

  <div class="results" id="results" hidden>
    <h2>R√©sultats :</h2>
    <div id="links"></div>
  </div>

<script>
function normalizeCity(city) {
  return city.trim().replace(/\s+/g, "_");
}

document.getElementById("criteriaForm").addEventListener("submit", e => {
  e.preventDefault();
  const city = document.getElementById("city").value.trim();
  const budget = document.getElementById("budget").value.trim();
  const type = document.getElementById("type").value;
  const keywords = document.getElementById("keywords").value.trim();

  const cityParam = normalizeCity(city);
  const kw = keywords ? " " + keywords : "";

  const linksDiv = document.getElementById("links");
  linksDiv.innerHTML = "";

  // ---- LEBONCOIN ----
  let lbcType = "";
  if (type === "maison") lbcType = "&real_estate_type=1";
  else if (type === "appartement") lbcType = "&real_estate_type=2";
  else if (type === "terrain") lbcType = "&real_estate_type=3";
  const lbcURL = `https://www.leboncoin.fr/recherche?category=9&locations=${encodeURIComponent(cityParam)}&price=0-${budget}${lbcType}&text=${encodeURIComponent(keywords)}`;
  linksDiv.innerHTML += `<a target="_blank" href="${lbcURL}">üè† Le Bon Coin</a>`;

  // ---- SELOGER ----
  let seType = "";
  if (type === "appartement") seType = "&types=1";
  else if (type === "maison") seType = "&types=2";
  const selogerURL = `https://www.seloger.com/list.htm?prix=${budget}${seType}&q=${encodeURIComponent(city + kw)}`;
  linksDiv.innerHTML += `<a target="_blank" href="${selogerURL}">üè¢ SeLoger</a>`;

  // ---- BIEN‚ÄôICI ----
  let bieniciType = "";
  if (type === "appartement") bieniciType = "&propertyType=apartment";
  else if (type === "maison") bieniciType = "&propertyType=house";
  else if (type === "terrain") bieniciType = "&propertyType=land";
  const bieniciURL = `https://www.bienici.com/recherche/achat?price-max=${budget}&text=${encodeURIComponent(city + kw)}${bieniciType}`;
  linksDiv.innerHTML += `<a target="_blank" href="${bieniciURL}">üåê Bien‚Äôici</a>`;

  // ---- PAP ----
  const papURL = `https://www.pap.fr/annonce/vente-immobilier-${encodeURIComponent(city)}-r${budget}?q=${encodeURIComponent(keywords)}`;
  linksDiv.innerHTML += `<a target="_blank" href="${papURL}">üìÑ PAP</a>`;

  // ---- Logic-Immo ----
  const logicURL = `https://www.logic-immo.com/recherche-immobiliere?localisations=${encodeURIComponent(city)}&prixMax=${budget}&query=${encodeURIComponent(keywords)}`;
  linksDiv.innerHTML += `<a target="_blank" href="${logicURL}">üìä Logic-Immo</a>`;

  // ---- Figaro Immo ----
  const figaroURL = `https://immobilier.lefigaro.fr/annonces/resultat/achat/?prix_max=${budget}&q=${encodeURIComponent(city + kw)}`;
  linksDiv.innerHTML += `<a target="_blank" href="${figaroURL}">üì∞ Figaro Immo</a>`;

  // ---- Ouest-France Immo ----
  const ofURL = `https://www.ouestfrance-immo.com/acheter/?Commune=${encodeURIComponent(city)}&PrixMax=${budget}&q=${encodeURIComponent(keywords)}`;
  linksDiv.innerHTML += `<a target="_blank" href="${ofURL}">üåç Ouest-France Immo</a>`;

  document.getElementById("results").hidden = false;
});
</script>
</body>
</html>
